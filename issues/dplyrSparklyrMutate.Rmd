---
output:
  md_document:
    variant: markdown_github
---


```{r}
# 4-15-2017
# commit 58fcd949d7709b4be44e2789a1c5355a6bd148f3
# devtools::install_github("rstudio/sparklyr") 
# commit d7d2f10167b4ac919e876eb9a891fd53345be985
# devtools::install_github("tidyverse/dplyr")

library("sparklyr")
library("dplyr")
library("nycflights13")
sc <- spark_connect(version='2.0.0', master = "local")
flts <- dplyr::copy_to(sc, flights)
```

```{r versions}
packageVersion("sparklyr")
packageVersion("dplyr")
packageVersion("DBI")
flts %>% mutate(zzz=1)  # works with dev version of Sparklyr
# used to fail 
#  https://github.com/tidyverse/dplyr/issues/2495
#  https://github.com/rstudio/sparklyr/issues/572 
#  https://github.com/rstudio/sparklyr/issues/577 
```

```{r clean}
rm(list=ls())
gc()
```


